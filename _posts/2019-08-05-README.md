---
layout: post
title: "README"
excerpt_separator:  <!--more-->
categories:
- Vault
tags:
- Vault
- Hashicorp
- security
---

<!--more-->

# Vault
*******

## 공개되면 안 되는 비밀번호, API 키, 토큰 등을 저장하고 관리하는 도구이다. 민감한 비밀 정보를 관리하기 위한 도구

공개되면안되는것 EX : 데이터베이스 계정명, 비밀번호, 외부 API를 사용한다면 엑세스 토큰, 서버에 접근하기 위한 SSH 비밀키 --> 이런 것을 관리해주는 Vault

소스코드는 생각보다 관리하기가 쉽지 않다. 
GitHub 등의 공개 저장소의 실수로 올리는 경우를 제외하더라도 소스코드는 대부분 관련 개발자의 PC에 저장되어 있는데 
악의적인 누출을 제외하더라도 개개인의 PC까지 다 제어하기는 쉽지 않기 때문에 유출될 가능성도 있고 
코드에 하드 코딩 되어 있으므로 이러한 비밀정보를 바꾸기도 쉽지 않다.

**Vault는 이러한 정보를 안전하게 보관하고 관리해 주는 도구**라고 생각하면 된다. 
Vault에 정보를 저장해 놓고 애플리케이션이나 서버에서는 가져다가 사용하겠다는 의미이다.
*******
## Vault 용어
**백엔드(Backend) : Vault의 기능 확장**
*******
### 스토리지 백엔드(Storage Backend)

**Vault에 정보를 저장하면 Vault가 이를 어딘가에는 저장해야 하는데 이를 스토리지 백엔드라고 부른다.**
스토리지 백엔드를 PostgreSQL로 설정하면 정보를 PostgreSQL에 저장하고 S3로 설정하면 파일에 저장한다. Consul, DynamoDB, S3, Google Cloud Storage, Azure, MySQL, PostgreSQL 등 다양한 백엔드를 지원하고 있다.
*******
### 시크릿 백엔드(Secret Backend)

#### 비밀정보를 관리할 수 있는 권한을 Vault에 주고 Vault가 필요에 따라 새로 만들어 줌으로써 계정이나 비밀정보를 관리할 수 있게 하겠다. 

Gerneric 시크릿 백엔드를 사용할 때 정보를 저장하면 위의 스토리지 백엔드로 설정한 물리 스토리지에 정보를 저장하게 된다. 
Cubbyhole는 Gerneric과 똑같이 동작하지만, 연습용 플레이그라운드라고 생각하면 된다. 
일반적으로 비밀정보를 저장할 때 생각하게 되는 username/password 등을 저장한다고 하면 이 Generic을 사용하면 된다.

AWS 시크릿 백엔드를 사용한다고 하면 **AWS에서 API 키와 시크릿을 만들어서 Vault에 이 정보로 AWS 시크릿 백엔드**를 설정한다. 그러면 **AWS 키가 필요할 때 이 백엔드에 요청을 하면 AWS에 접속해서 새로운 Role을 만들고 그 엑세스 키와 시크릿 정보를 관리**해 주게 된다. 즉 요청할 때마다 새로운 IAM Role이 생성되어 반환해 준다.
*******
### 인증 백엔드(Auth Backend)

#### Vault에 중요한 정보를 관리하기 시작했으면 이 Vault에 접근할 수 있는 권한을 제어해야 하는데 이게 인증 백엔드이다. 

인증 백엔드는 username/password도 있고 Token 백엔드도 있어서 필요에 따라 사람이나 애플리케이션 등에서 사용하도록 만들 수 있다.
*****

